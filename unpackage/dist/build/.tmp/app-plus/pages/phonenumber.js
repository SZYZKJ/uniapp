(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/phonenumber"],{1059:function(e,t,n){"use strict";n("38a7");var a=u(n("b0ce")),r=u(n("6cf9"));function u(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(r.default))},"1b73":function(e,t,n){"use strict";n.r(t);var a=n("f25d"),r=n.n(a);for(var u in a)"default"!==u&&function(e){n.d(t,e,function(){return a[e]})}(u);t["default"]=r.a},"6cf9":function(e,t,n){"use strict";n.r(t);var a=n("895c"),r=n("1b73");for(var u in r)"default"!==u&&function(e){n.d(t,e,function(){return r[e]})}(u);n("83e7");var i=n("2877"),o=Object(i["a"])(r["default"],a["a"],a["b"],!1,null,null,null);t["default"]=o.exports},"83e7":function(e,t,n){"use strict";var a=n("a47a"),r=n.n(a);r.a},"895c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"phonenumber"},[n("image",{staticClass:"authorize-icon",attrs:{src:"../static/authorize.png"}}),n("view",{staticClass:"auth-item"},[e._v("为更好向您提供服务")]),n("view",{staticClass:"auth-item"},[e._v("恋爱联盟申请获取以下权限：")]),n("view",{staticClass:"auth-item"},[e._v("获取您的手机号码")]),n("view",{staticClass:"btn-authorize"},[n("button",{attrs:{"open-type":"getPhoneNumber",type:"primary",bindgetphonenumber:"getPhoneNumber"}},[e._v("授权")])],1)])},r=[];n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r})},a47a:function(e,t,n){},f25d:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n("a34a")),r=u(n("1490"));u(n("d729"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,a,r,u,i){try{var o=e[u](i),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var u=e.apply(t,n);function o(e){i(u,a,r,o,s,"next",e)}function s(e){i(u,a,r,o,s,"throw",e)}o(void 0)})}}var s={data:function(){return{loginres:{}}},methods:{getPhoneNumber:function(){var t=o(a.default.mark(function t(n){var u,i,o;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(u=e.getStorageSync("unionid")||"",""!=u){t.next=4;break}return e.navigateTo({url:"/pages/shouquan"}),t.abrupt("return",!1);case 4:if("getPhoneNumber:ok"!=n.detail.errMsg){t.next=20;break}if(!this.loginres.code){t.next=18;break}return t.next=8,r.default.getPhoneNumber({unionid:u,jsCode:this.loginres.code,encryptedData:n.detail.encryptedData,iv:n.detail.iv});case 8:if(i=t.sent,e.setStorageSync("userInfo",n.detail.userInfo),!i.data.unionid){t.next=15;break}o=i.data,o.unionid&&(e.setStorageSync("unionid",o.unionid),e.setStorageSync("phoneNumber",1),e.navigateBack({delta:1})),t.next=18;break;case 15:return t.next=17,e.showModal({title:"appid有误",content:"授权失败"});case 17:t.sent;case 18:t.next=21;break;case 20:e.showModal({title:"友情提示",content:"尊敬的用户，为确保对您的服务质量，请允许我们获取您的手机号码"});case 21:case"end":return t.stop()}},t,this)}));function n(e){return t.apply(this,arguments)}return n}()},onLoad:function(){var t=o(a.default.mark(function t(){return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.login();case 2:this.loginres=t.sent;case 3:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),onShareAppMessage:function(){return{title:"恋爱联盟",path:"/pages/home"}}};t.default=s}).call(this,n("6e42")["default"])}},[["1059","common/runtime","common/vendor"]]]);